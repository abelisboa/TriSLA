# ============================================
# Prometheus Configuration - TriSLA
# Configuração para Docker Compose (desenvolvimento local)
# Para Kubernetes, use kubernetes_sd_configs
# ============================================

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'local'
    environment: 'development'

scrape_configs:
  # TriSLA Modules - Docker Compose
  - job_name: 'trisla-sem-csmf'
    static_configs:
      - targets: ['sem-csmf:8080']
        labels:
          module: 'sem-csmf'
          service: 'trisla'

  - job_name: 'trisla-ml-nsmf'
    static_configs:
      - targets: ['ml-nsmf:8081']
        labels:
          module: 'ml-nsmf'
          service: 'trisla'

  - job_name: 'trisla-decision-engine'
    static_configs:
      - targets: ['decision-engine:8082']
        labels:
          module: 'decision-engine'
          service: 'trisla'

  - job_name: 'trisla-bc-nssmf'
    static_configs:
      - targets: ['bc-nssmf:8083']
        labels:
          module: 'bc-nssmf'
          service: 'trisla'

  - job_name: 'trisla-sla-agent-layer'
    static_configs:
      - targets: ['sla-agent-layer:8084']
        labels:
          module: 'sla-agent-layer'
          service: 'trisla'

  - job_name: 'trisla-nasp-adapter'
    static_configs:
      - targets: ['nasp-adapter:8085']
        labels:
          module: 'nasp-adapter'
          service: 'trisla'

  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

rule_files:
  - "/etc/prometheus/rules/*.yml"
  - "/etc/prometheus/rules/alerts.yml"

# Alerting configurado
alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093

