============================================================
AUDITORIA REMOTA READ-ONLY - FASE M (ML-NSMF) - V2
Data: ter 02 dez 2025 20:21:58 -03
Host: ppgca
Diretório: /home/porvir5g/gtp5g
Modo: READ-ONLY (sem modificações)
============================================================

1. STATUS OPERACIONAL REAL DO ML-NSMF NO NASP
============================================================

PODS ML-NSMF:
- Status: NENHUM POD EM EXECUÇÃO
- Pods encontrados com label app=ml-nsmf: 0
- Anteriormente havia pod Running (trisla-ml-nsmf-8458884946-gnrdg)

SERVICE ML-NSMF:
- Nome: trisla-ml-nsmf
- Tipo: ClusterIP
- IP: 10.233.10.81
- Porta: 8081/TCP
- Status: ATIVO (mas sem pods para servir)

DEPLOYMENT ML-NSMF:
- Verificar se existe deployment configurado

CONFIGURAÇÃO HELM:
- Versão configurada: v3.7.3-nasp
- Repository: trisla-ml-nsmf
- Porta: 8081
- Replicas: 1
- NodeSelector: node1

EVENTOS E WARNINGS:
- Warnings sobre image pull secrets (ghcr-secret)
- Dois pods mencionados em eventos:
  * trisla-ml-nsmf-6bc8bcbb7c-ptbh4
  * trisla-ml-nsmf-8458884946-gnrdg

============================================================
2. FUNCIONAMENTO DE I-02/I-03
============================================================

I-02 (DECISION ENGINE → ML-NSMF):
- Status: IMPOSSÍVEL VERIFICAR (sem pods)
- Service existe, mas não há pods para processar requisições
- Logs: Nenhum disponível (sem pods)

I-03 (ML-NSMF → BC-NSSMF):
- Status: IMPOSSÍVEL VERIFICAR (sem pods)
- Logs: Nenhum disponível (sem pods)

============================================================
3. LOGS CRÍTICOS COLETADOS
============================================================

LOGS ML-NSMF:
- Nenhum log disponível (sem pods em execução)

LOGS DECISION ENGINE:
- Nenhuma referência ao ML-NSMF encontrada nas últimas 24h

PREDIÇÕES REALIZADAS:
- IMPOSSÍVEL VERIFICAR (sem pods)

============================================================
4. INTEGRIDADE DOS ARQUIVOS REAIS
============================================================

ESTRUTURA NO CONTAINER:
- IMPOSSÍVEL VERIFICAR (sem pods em execução)
- Anteriormente havia modelos no container:
  * /app/models/scaler.pkl
  * /app/models/viability_model.pkl
  * /app/models/model_metadata.json

ESTRUTURA NO REPOSITÓRIO LOCAL:
- apps/ml_nsmf/Dockerfile (EXISTE - 659 bytes)
- apps/ml_nsmf/src/ (NÃO ENCONTRADO)
- apps/ml_nsmf/models/ (NÃO EXISTE)
- Código fonte Python: NÃO ENCONTRADO no repositório

============================================================
5. DIVERGÊNCIAS E PROBLEMAS DETECTADOS
============================================================

PROBLEMA CRÍTICO:
1. NENHUM POD ML-NSMF EM EXECUÇÃO
   - Service existe mas não há pods para servir
   - Deployment pode estar com problema
   - CLASSIFICAÇÃO: BLOQUEANTE

2. IMAGE PULL SECRET WARNINGS
   - Warnings sobre ghcr-secret
   - Pode estar impedindo criação de novos pods
   - CLASSIFICAÇÃO: BLOQUEANTE

3. CÓDIGO FONTE AUSENTE
   - Apenas Dockerfile no repositório
   - Código está apenas na imagem container
   - CLASSIFICAÇÃO: NÃO BLOQUEANTE (mas problemático)

============================================================
6. CLASSIFICAÇÃO DE RISCOS
============================================================

RISCO BLOQUEANTE:
1. Nenhum pod ML-NSMF em execução
2. Service ativo mas sem backend
3. Image pull secret com problemas
4. Impossível processar predições
5. Integrações I-02/I-03 não operacionais

RISCO NÃO BLOQUEANTE:
1. Código fonte ausente no repositório
2. Modelos ausentes no repositório

RISCO AMBIENTAL:
1. Estado do cluster pode ter mudado desde última auditoria
2. Pods podem ter sido removidos ou falhado

============================================================
7. IMPACTO NO PROCESSO DE ESTABILIZAÇÃO DA FASE M
============================================================

IMPACTO CRÍTICO:
- ML-NSMF COMPLETAMENTE INDISPONÍVEL
- Service existe mas não há pods para processar requisições
- Nenhuma predição pode ser realizada
- Integrações I-02 e I-03 impossíveis
- Pipeline está QUEBRADO neste ponto

IMPACTO OPERACIONAL:
- Service Kubernetes está configurado corretamente
- Mas não há pods para servir o service
- Deployment pode estar com problema ou pods falharam

CONCLUSÃO:
- Fase M está COMPLETAMENTE INDISPONÍVEL
- Estado piorou desde a última auditoria
- Anteriormente havia pelo menos um pod Running
- Agora não há nenhum pod disponível

============================================================
8. RECOMENDAÇÃO FINAL
============================================================

AÇÃO IMEDIATA NECESSÁRIA:
1. Investigar por que não há pods ML-NSMF em execução
2. Verificar status do Deployment ML-NSMF
3. Corrigir image pull secret (ghcr-secret)
4. Verificar se há problemas de recursos (CPU/memória)
5. Verificar logs do Deployment para entender falhas
6. Recriar pods se necessário (após corrigir problemas)

AÇÃO DE SINCRONIZAÇÃO:
1. NÃO SINCRONIZAR - estado crítico
2. Extrair código fonte do container quando pods estiverem rodando
3. Extrair modelos do container quando pods estiverem rodando
4. Sincronizar versão da imagem com Helm chart

NÃO SINCRONIZAR:
- O estado atual está CRÍTICO
- Nenhum pod disponível
- Service sem backend
- Pipeline quebrado

============================================================
9. CONCLUSÃO OBRIGATÓRIA
============================================================

AUDITORIA NODE1 CONCLUÍDA — FASE M CRÍTICA. NÃO SINCRONIZAR.

JUSTIFICATIVA:
- NENHUM POD ML-NSMF EM EXECUÇÃO
- Service existe mas sem backend
- Pipeline completamente quebrado neste ponto
- Estado piorou desde última auditoria
- Image pull secret com problemas

COMPARAÇÃO COM AUDITORIA ANTERIOR:
- ANTES: 1 pod Running (v3.7.0-nasp), mas não integrado
- AGORA: 0 pods, service sem backend
- SITUAÇÃO: PIOROU SIGNIFICATIVAMENTE

============================================================
FIM DO RELATÓRIO
============================================================
