==============================================================
E2E TEST SUMMARY - TriSLA v3.7.2-nasp
==============================================================
Data: ter 02 dez 2025 14:15:02 -03
Ambiente: NASP (node1)
Namespace: trisla
Commit: 8514a9f FASE EC.2: SEM-CSMF usando DECISION_ENGINE_URL (HTTP) - v3.7.2-nasp
Tag: v3.7.2-nasp

==============================================================
1. AMBIENTE
==============================================================

Pods ativos:
  - curl-tester: 1/1/Running (0)
  - trisla-bc-nssmf-76bd859c55-ftj8v: 1/1/Running (0)
  - trisla-decision-engine-fc4d9688b-46dbg: 1/1/Running (0)
  - trisla-ml-nsmf-8458884946-8ght7: 1/1/Running (0)
  - trisla-nasp-adapter-8496f7d686-g8kw6: 1/1/Running (0)
  - trisla-sem-csmf-f4d8697d-mr6tr: 1/1/Running (0)
  - trisla-sla-agent-layer-6b65566595-5hw6q: 1/1/Running (0)
  - trisla-ui-dashboard-dfb9ff9cc-8cqmt: 1/1/Running (0)

Services ativos:
  - trisla-bc-nssmf: 8083/TCP
  - trisla-decision-engine: 8082/TCP
  - trisla-ml-nsmf: 8081/TCP
  - trisla-nasp-adapter: 8085/TCP
  - trisla-sem-csmf: 8080/TCP
  - trisla-sla-agent-layer: 8084/TCP
  - trisla-ui-dashboard: 80/TCP

Versões das imagens:
  - curl-tester	curlimages/curl:8.10.1
  - trisla-bc-nssmf-76bd859c55-ftj8v	ghcr.io/abelisboa/trisla-bc-nssmf:nasp-a2
  - trisla-decision-engine-fc4d9688b-46dbg	ghcr.io/abelisboa/trisla-decision-engine:v3.7.0-nasp
  - trisla-ml-nsmf-8458884946-8ght7	ghcr.io/abelisboa/trisla-ml-nsmf:v3.7.0-nasp
  - trisla-nasp-adapter-8496f7d686-g8kw6	ghcr.io/abelisboa/trisla-nasp-adapter:nasp-a2
  - trisla-sem-csmf-f4d8697d-mr6tr	ghcr.io/abelisboa/trisla-sem-csmf:nasp-a2
  - trisla-sla-agent-layer-6b65566595-5hw6q	ghcr.io/abelisboa/trisla-sla-agent-layer:nasp-a2
  - trisla-ui-dashboard-dfb9ff9cc-8cqmt	ghcr.io/abelisboa/trisla-ui-dashboard:nasp-a2

==============================================================
2. TESTES EXECUTADOS
==============================================================

✅ Teste 1: URLLC (e2e-v3-7-2-urlcc-001)
✅ Teste 2: eMBB (e2e-v3-7-2-embb-001)
✅ Teste 3: mMTC (e2e-v3-7-2-mmtc-001)

==============================================================
3. RESULTADO POR TESTE
==============================================================

Teste 1 - URLLC:
Status: FALHA (UNIQUE constraint - intent_id duplicado)
Resumo: Intent aceito mas erro ao salvar no banco

Teste 2 - eMBB:
Status: PARCIAL
Resumo: Intent aceito, NEST gerado, mas erro ao comunicar com Decision Engine
Erro: Connection refused em 127.0.0.1:50051 (gRPC)

Teste 3 - mMTC:
Status: PARCIAL
Resumo: Intent aceito, NEST gerado, mas erro ao comunicar com Decision Engine
Erro: Connection refused em 127.0.0.1:50051 (gRPC)

==============================================================
4. EVIDÊNCIAS DE PIPELINE COMPLETO
==============================================================

SEM-CSMF → Decision Engine: ❌ FALHA
  - SEM-CSMF tentando conectar via gRPC em 127.0.0.1:50051
  - Erro: Connection refused
  - DECISION_ENGINE_URL não está sendo usada

Decision Engine → ML-NSMF: ⚠️ NÃO TESTADO (DE não recebeu requisições)

ML-NSMF → BC-NSSMF: ⚠️ NÃO TESTADO

BC-NSSMF → NASP Adapter: ⚠️ NÃO TESTADO

SLA-Agent-Layer: ⚠️ NÃO TESTADO

==============================================================
5. PROBLEMAS ENCONTRADOS
==============================================================

CRÍTICO:
1. SEM-CSMF não está usando DECISION_ENGINE_URL
   - Tentando conectar via gRPC em 127.0.0.1:50051
   - Decision Engine está na porta 8082 (HTTP), não 50051 (gRPC)
   - Código Python do SEM-CSMF precisa usar HTTP endpoint

2. Pipeline não completa
   - SEM-CSMF processa intent e gera NEST
   - Mas falha ao comunicar com Decision Engine
   - Decision Engine não recebe requisições
   - ML-NSMF, BC-NSSMF e NASP Adapter não são acionados

MODERADO:
3. ML-NSMF operando em modo fallback
   - Erro: No module named 'numpy._core'
   - Modelo v3.7.0 não carregado

4. Teste URLLC falhou por constraint UNIQUE
   - Intent_id duplicado (provavelmente de teste anterior)

==============================================================
6. CONCLUSÃO
==============================================================

E2E v3.7.2-nasp COM PENDÊNCIAS

Motivos:
- Pipeline não completa devido a erro de conexão SEM-CSMF → Decision Engine
- SEM-CSMF não está usando DECISION_ENGINE_URL (HTTP endpoint)
- Apenas fase inicial do pipeline funciona (SEM-CSMF processa intent)
- Módulos downstream (ML-NSMF, BC-NSSMF, NASP Adapter) não são acionados

Ação recomendada:
- Corrigir código Python do SEM-CSMF para usar DECISION_ENGINE_URL (HTTP)
- Rebuildar imagem SEM-CSMF com correção
- Re-executar testes E2E após correção

==============================================================
