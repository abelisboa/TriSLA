==============================================================
E2E TEST SUMMARY - TriSLA v3.7.2-nasp-fix
==============================================================
Data: ter 02 dez 2025 14:32:01 -03
Ambiente: NASP (node1)
Namespace: trisla
Versão: v3.7.2-nasp-fix

==============================================================
1. AMBIENTE
==============================================================

Pods ativos:
  - curl-tester-e2e: 1/1/Running (0)
  - trisla-bc-nssmf-bcf77bc48-5npdv: 1/1/Running (0)
  - trisla-decision-engine-fc4d9688b-cmtw5: 1/1/Running (0)
  - trisla-ml-nsmf-8458884946-gnrdg: 1/1/Running (0)
  - trisla-nasp-adapter-85d5d588d9-5vcwf: 1/1/Running (0)
  - trisla-sem-csmf-c6bc485d5-59r9k: 1/1/Running (0)
  - trisla-sla-agent-layer-77d986577b-j64nw: 1/1/Running (0)
  - trisla-ui-dashboard-54f5b7f55d-rbz48: 0/1/CrashLoopBackOff (6)

Services ativos:
  - trisla-bc-nssmf: 8083/TCP
  - trisla-decision-engine: 8082/TCP
  - trisla-ml-nsmf: 8081/TCP
  - trisla-nasp-adapter: 8085/TCP
  - trisla-sem-csmf: 8080/TCP
  - trisla-sla-agent-layer: 8084/TCP
  - trisla-ui-dashboard: 80/TCP

Versões das imagens:
  - trisla-bc-nssmf-bcf77bc48-5npdv	ghcr.io/abelisboa/trisla-bc-nssmf:v3.7.2-nasp
  - trisla-decision-engine-fc4d9688b-cmtw5	ghcr.io/abelisboa/trisla-decision-engine:v3.7.0-nasp
  - trisla-ml-nsmf-8458884946-gnrdg	ghcr.io/abelisboa/trisla-ml-nsmf:v3.7.0-nasp
  - trisla-nasp-adapter-85d5d588d9-5vcwf	ghcr.io/abelisboa/trisla-nasp-adapter:v3.7.2-nasp
  - trisla-sem-csmf-c6bc485d5-59r9k	ghcr.io/abelisboa/trisla-sem-csmf:v3.7.2-nasp
  - trisla-sla-agent-layer-77d986577b-j64nw	ghcr.io/abelisboa/trisla-sla-agent-layer:v3.7.2-nasp
  - trisla-ui-dashboard-54f5b7f55d-rbz48	ghcr.io/abelisboa/trisla-ui-dashboard:v3.7.2-nasp

==============================================================
2. TESTES EXECUTADOS
==============================================================

✅ Teste 1: URLLC (e2e-v3-7-2-fix-urllc-001)
   - Intent: cirurgia remota em robótica de alta precisão
   - Status HTTP: 200 OK
   - Resposta: Intent aceito, NEST gerado
   - Tempo: < 1s

✅ Teste 2: eMBB (e2e-v3-7-2-fix-embb-001)
   - Intent: streaming 8K de evento esportivo ao vivo
   - Status HTTP: 200 OK
   - Resposta: Intent aceito, NEST gerado
   - Tempo: < 1s

✅ Teste 3: mMTC (e2e-v3-7-2-fix-mmtc-001)
   - Intent: monitoramento massivo de sensores IoT em área urbana
   - Status HTTP: 200 OK
   - Resposta: Intent aceito, NEST gerado
   - Tempo: < 1s

==============================================================
3. PIPELINE
==============================================================

SEM-CSMF → Decision Engine: ❌ FALHA (DNS)
  - SEM-CSMF processa intent e gera NEST ✅
  - SEM-CSMF tenta conectar via HTTP ✅ (correto)
  - Erro: NameResolutionError (DNS não resolve service name)
  - Código correto: usa HTTP, não gRPC ✅

Decision Engine → ML-NSMF: ⚠️ NÃO TESTADO
  - Decision Engine não recebeu requisições (bloqueado por DNS)

ML-NSMF → BC-NSSMF: ⚠️ NÃO TESTADO
  - Pipeline não completa devido a falha anterior

BC-NSSMF → NASP Adapter: ⚠️ NÃO TESTADO
  - Pipeline não completa devido a falha anterior

SLA-Agent-Layer: ⚠️ NÃO TESTADO
  - Pipeline não completa devido a falha anterior

==============================================================
4. PROBLEMAS DETECTADOS
==============================================================

CRÍTICO:
1. Problema de DNS no Kubernetes
   - SEM-CSMF não consegue resolver: trisla-decision-engine.trisla.svc.cluster.local
   - Erro: NameResolutionError ([Errno -3] Temporary failure in name resolution)
   - Impacto: Pipeline não completa, Decision Engine não recebe requisições
   - Causa provável: Configuração DNS do cluster ou CoreDNS

MODERADO:
2. UI-Dashboard em CrashLoopBackOff
   - Não crítico para pipeline E2E
   - Problema de secret GHCR (FailedToRetrieveImagePullSecret)

POSITIVO:
3. Código SEM-CSMF corrigido ✅
   - Usa HTTP (decision_engine_client.py) ✅
   - Não usa mais gRPC 127.0.0.1:50051 ✅
   - Imagem v3.7.2-nasp rodando corretamente ✅

==============================================================
5. CLASSIFICAÇÃO FINAL
==============================================================

E2E v3.7.2-nasp-fix — SUCESSO PARCIAL

Motivos:
- ✅ SEM-CSMF processa intents corretamente (3/3 sucessos)
- ✅ NEST gerado para todos os testes
- ✅ Código usa HTTP (correção aplicada com sucesso)
- ❌ Pipeline não completa devido a problema de DNS (infraestrutura)
- ⚠️ Decision Engine, ML-NSMF, BC-NSSMF e NASP Adapter não foram acionados

Evidências:
1. Todos os 3 intents foram aceitos e processados pelo SEM-CSMF
2. NEST gerado para cada intent (nest-e2e-v3-7-2-fix-*)
3. Código SEM-CSMF usa HTTP corretamente (não mais gRPC)
4. Erro de DNS impede comunicação SEM-CSMF → Decision Engine
5. Pipeline downstream não foi testado (bloqueado por DNS)

Ação recomendada:
- Investigar e corrigir problema de DNS do cluster Kubernetes
- Verificar CoreDNS e configuração de services
- Após correção DNS, re-executar E2E para validação completa

==============================================================
