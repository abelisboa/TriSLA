# Default values for trisla-portal

replicaCount: 2

image:
  frontend:
    repository: ghcr.io/abelisboa/trisla-portal-frontend
    pullPolicy: IfNotPresent
    tag: "4.0.0"
  backend:
    repository: ghcr.io/abelisboa/trisla-portal-backend
    pullPolicy: IfNotPresent
    tag: "4.0.0"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  frontend:
    type: ClusterIP
    port: 3000
  backend:
    type: ClusterIP
    port: 8000

ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
  hosts:
    - host: trisla-portal.example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: trisla-portal-tls
      hosts:
        - trisla-portal.example.com

resources:
  frontend:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi
  backend:
    limits:
      cpu: 2000m
      memory: 2Gi
    requests:
      cpu: 1000m
      memory: 1Gi

autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Database
database:
  type: postgresql  # sqlite or postgresql
  postgresql:
    host: postgresql.trisla.svc.cluster.local
    port: 5432
    database: trisla_portal
    username: trisla_portal
    passwordSecret: trisla-portal-db-secret
    passwordKey: password

# Redis
redis:
  enabled: true
  host: redis.trisla.svc.cluster.local
  port: 6379

# Observability
observability:
  prometheus:
    url: http://monitoring-kube-prometheus-prometheus.monitoring.svc.cluster.local:9090
  loki:
    url: http://loki.monitoring.svc.cluster.local:3100
  tempo:
    url: http://tempo.monitoring.svc.cluster.local:3200
  otel:
    endpoint: http://trisla-otel-collector.trisla.svc.cluster.local:4317
    serviceName: trisla-observability-api

# TriSLA Modules
trisla:
  semCsmf:
    url: http://trisla-sem-csmf.trisla.svc.cluster.local:8080
  mlNsmf:
    url: http://trisla-ml-nsmf.trisla.svc.cluster.local:8081
  decisionEngine:
    url: http://trisla-decision-engine.trisla.svc.cluster.local:8082
  bcNssmf:
    url: http://trisla-bc-nssmf.trisla.svc.cluster.local:8083
  slaAgentLayer:
    url: http://trisla-sla-agent-layer.trisla.svc.cluster.local:8084
  naspAdapter:
    url: http://trisla-nasp-adapter.trisla.svc.cluster.local:8085

# ServiceMonitor for Prometheus
serviceMonitor:
  enabled: true
  interval: 30s
  scrapeTimeout: 10s

# PrometheusRules
prometheusRules:
  enabled: true







